digraph ml {
    ndPwmMotor[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nPwmMotor|- is_inverted: bool\n- id: MotorID\n- pwm: Pwm\n- direction: Pin\n- state: MotorState|+ create(pwm: Pwm, direction: Pin, id: MotorID) -&gt; Result&lt;Self, ()&gt;}"][shape="record"];
    ndTestMotorGroup[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nTestMotorGroup|+ inverted: Arc&lt;RwLock&lt;bool&gt;&gt;\n+ speed: Arc&lt;RwLock&lt;f32&gt;&gt;\n+ motor_group: MotorGroup}"][shape="record"];
    ndMotorGroup[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nMotorGroup|- motors: Vec&lt;Box&lt;MotorController&gt;&gt;\n- old_speed: f32|+ new(motors: Vec&lt;Box&lt;MotorController&gt;&gt;) -&gt; Self\n+ set_speed(&amp;mut self, new_speed: f32)\n+ stop(&amp;mut self)\n+ invert(&amp;mut self)\n+ maintain_last(&amp;mut self)\n+ get_states(&amp;self) -&gt; Vec&lt;MotorState&gt;\n- run_operation(&amp;mut self, operation: T)}"][shape="record"];
    ndTestMotor[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nTestMotor|- inverted: Arc&lt;RwLock&lt;bool&gt;&gt;\n- speed: Arc&lt;RwLock&lt;f32&gt;&gt;\n- state: MotorState|+ new(inverted: Arc&lt;RwLock&lt;bool&gt;&gt;, speed: Arc&lt;RwLock&lt;f32&gt;&gt;) -&gt; TestMotor\n- set_motor_state(&amp;mut self, new_state: MotorState)}"][shape="record"];
    ndPrintMotor[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nPrintMotor|- name: String\n- inverted: bool\n- last: f32\n- is_stopped: bool|+ new(name: &amp;str) -&gt; PrintMotor}"][shape="record"];
    ndMotorStateKind[label="{&lt;&lt;&lt;Enumeration&gt;&gt;&gt;\nMotorStateKind|Unknown\nUnexported\nOk}"][shape="record"];
    ndMotorController[label="{&lt;&lt;&lt;Trait&gt;&gt;&gt;\nMotorController|get_motor_state(&amp;Self) -&gt; MotorState}"][shape="record"];
    ndMotorState[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nMotorState|- motor: MotorID\n- kind: MotorStateKind|+ new(motor: MotorID, kind: MotorStateKind) -&gt; Self\n+ get_motor(&amp;self) -&gt; MotorID\n+ get_kind(&amp;self) -&gt; MotorStateKind}"][shape="record"];
    ndSensor[label="{&lt;&lt;&lt;Trait&gt;&gt;&gt;\nSensor|}"][shape="record"];
    ndTestEnvironment[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nTestEnvironment|- receiver: Receiver&lt;RobotControllerCommand&gt;\n- sender: ServerSender\n- client: Client\n- status: Arc&lt;RwLock&lt;RobotLifeStatus&gt;&gt;}"][shape="record"];
    ndSendableMessage[label="{&lt;&lt;&lt;Trait&gt;&gt;&gt;\nSendableMessage|encode(&amp;Self) -&gt; String}"][shape="record"];
    ndServerSender[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nServerSender|- channel: Sender&lt;Box&lt;SendableMessage&gt;&gt;|+ send_message(&amp;self, message: Box&lt;SendableMessage&gt;)\n- new(channel: Sender&lt;Box&lt;SendableMessage&gt;&gt;) -&gt; Self}"][shape="record"];
    ndServerState[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nServerState|- receiver: Mutex&lt;Receiver&lt;Box&lt;SendableMessage&gt;&gt;&gt;\n- robot_controller: Mutex&lt;RobotView&gt;}"][shape="record"];
    ndDrive[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nDrive}"][shape="record"];
    ndRunnable[label="{&lt;&lt;&lt;Trait&gt;&gt;&gt;\nRunnable|}"][shape="record"];
    ndMotorID[label="{&lt;&lt;&lt;Enumeration&gt;&gt;&gt;\nMotorID|DriveTrainFrontLeft\nDriveTrainFrontRight\nDriveTrainRearLeft\nDriveTrainRearRight\nNull}"][shape="record"];
    ndTestMotorGroup[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nTestMotorGroup|+ inverted: Arc&lt;RwLock&lt;bool&gt;&gt;\n+ speed: Arc&lt;RwLock&lt;f32&gt;&gt;\n+ motor_group: MotorGroup}"][shape="record"];
    ndDriveTrain[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nDriveTrain|- is_enabled: bool\n- left: MotorGroup\n- right: MotorGroup\n- robot_status: Arc&lt;RwLock&lt;RobotLifeStatus&gt;&gt;|+ new(left: MotorGroup, right: MotorGroup, robot_status: Arc&lt;RwLock&lt;RobotLifeStatus&gt;&gt;) -&gt; DriveTrain\n+ run_cycle(&amp;mut self)\n+ drive(&amp;mut self, left_speed: f32, right_speed: f32)\n+ brake(&amp;mut self)\n+ enable(&amp;mut self)\n+ disable(&amp;mut self)\n+ get_motor_states(&amp;self) -&gt; Vec&lt;MotorState&gt;\n- maintain_last(&amp;mut self)}"][shape="record"];
    ndRobotController[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nRobotController|- driver_station_view: ServerSender\n- command_receiver: Receiver&lt;RobotControllerCommand&gt;\n- drive_train: DriveTrain\n- life_status: Arc&lt;RwLock&lt;RobotLifeStatus&gt;&gt;|+ new(driver_station_view: ServerSender, command_receiver: Receiver&lt;RobotControllerCommand&gt;, drive_train: DriveTrain, life_status: Arc&lt;RwLock&lt;RobotLifeStatus&gt;&gt;) -&gt; Self\n- handle_message(&amp;mut self, message: RobotControllerCommand)\n- process_states(&amp;mut self)}"][shape="record"];
    ndRobotLifeStatus[label="{&lt;&lt;&lt;Enumeration&gt;&gt;&gt;\nRobotLifeStatus|Alive\nDead}"][shape="record"];
    ndRobotControllerCommand[label="{&lt;&lt;&lt;Enumeration&gt;&gt;&gt;\nRobotControllerCommand|Drive(DriveCommandMessage)\nBrake\nEnable\nDisable}"][shape="record"];
    ndRobotView[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nRobotView|- channel: Sender&lt;RobotControllerCommand&gt;\n- robot_life_status: Arc&lt;RwLock&lt;RobotLifeStatus&gt;&gt;|+ new(channel: Sender&lt;RobotControllerCommand&gt;, robot_life_status: Arc&lt;RwLock&lt;RobotLifeStatus&gt;&gt;) -&gt; Self\n+ revive(&amp;self) -&gt; Result&lt;(), ()&gt;\n+ kill(&amp;self) -&gt; Result&lt;(), ()&gt;\n+ drive(&amp;self, left: f32, right: f32) -&gt; Result&lt;(), ()&gt;\n+ brake(&amp;self)\n+ enable_drive_train(&amp;self)\n+ disable_drive_train(&amp;self)\n- send_command(&amp;self, command: RobotControllerCommand)\n- change_life_status(&amp;self, status: RobotLifeStatus) -&gt; Result&lt;(), ()&gt;}"][shape="record"];
    ndDriveCommandMessage[label="{&lt;&lt;&lt;Structure&gt;&gt;&gt;\nDriveCommandMessage|- left_speed: f32\n- right_speed: f32|+ create(left_speed: f32, right_speed: f32) -&gt; Result&lt;Self, ()&gt;\n+ get_left_speed(&amp;self) -&gt; f32\n+ get_right_speed(&amp;self) -&gt; f32}"][shape="record"];
    ndMotorGroup -> ndTestMotorGroup[label=""][arrowhead="diamond"];
    ndMotorGroup -> ndDriveTrain[label=""][style="dashed"][arrowhead="diamond"];
    ndMotorStateKind -> ndMotorState[label=""][style="dashed"][arrowhead="diamond"];
    ndMotorController -> ndPwmMotor[label=""][style="dashed"][arrowhead="onormal"];
    ndMotorController -> ndMotorGroup[label=""][arrowhead="diamond"];
    ndMotorController -> ndTestMotor[label=""][style="dashed"][arrowhead="onormal"];
    ndMotorController -> ndPrintMotor[label=""][style="dashed"][arrowhead="onormal"];
    ndMotorState -> ndPwmMotor[label=""][arrowhead="diamond"];
    ndMotorState -> ndMotorGroup[label=""][arrowhead="vee"];
    ndMotorState -> ndTestMotor[label=""][style="dashed"][arrowhead="diamond"];
    ndMotorState -> ndPrintMotor[label=""][arrowhead="vee"];
    ndMotorState -> ndDriveTrain[label=""][arrowhead="vee"];
    ndSendableMessage -> ndMotorState[label=""][style="dashed"][arrowhead="onormal"];
    ndSendableMessage -> ndServerSender[label=""][arrowhead="diamond"];
    ndSendableMessage -> ndServerState[label=""][arrowhead="diamond"];
    ndServerSender -> ndTestEnvironment[label=""][arrowhead="diamond"];
    ndServerSender -> ndRobotController[label=""][style="dashed"][arrowhead="diamond"];
    ndRunnable -> ndRobotController[label=""][style="dashed"][arrowhead="onormal"];
    ndMotorID -> ndPwmMotor[label=""][style="dashed"][arrowhead="diamond"];
    ndMotorID -> ndMotorState[label=""][style="dashed"][arrowhead="diamond"];
    ndDriveTrain -> ndRobotController[label=""][style="dashed"][arrowhead="diamond"];
    ndRobotLifeStatus -> ndTestEnvironment[label=""][arrowhead="diamond"];
    ndRobotLifeStatus -> ndDriveTrain[label=""][arrowhead="diamond"];
    ndRobotLifeStatus -> ndRobotController[label=""][arrowhead="diamond"];
    ndRobotLifeStatus -> ndRobotView[label=""][style="dashed"][arrowhead="diamond"];
    ndRobotControllerCommand -> ndTestEnvironment[label=""][arrowhead="diamond"];
    ndRobotControllerCommand -> ndRobotController[label=""][style="dashed"][arrowhead="diamond"];
    ndRobotControllerCommand -> ndRobotView[label=""][style="dashed"][arrowhead="diamond"];
    ndRobotView -> ndServerState[label=""][arrowhead="diamond"];
    ndDriveCommandMessage -> ndRobotControllerCommand[label=""][arrowhead="diamond"];
}
